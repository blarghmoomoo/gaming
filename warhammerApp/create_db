pragma foreign_keys = on;
drop table if exists person;
drop table if exists skill;
drop table if exists skills;
drop table if exists skill_spec;
drop table if exists talents;
drop table if exists talent;
drop table if exists talent_spec;
drop table if exists traits;
drop table if exists trait;
drop table if exists spec;
drop table if exists ranged_weapon;
drop table if exists ranged_specials;
drop table if exists melee_weapon;
drop table if exists melee_specials;
drop table if exists weapon_special;
drop table if exists armor;
create table if not exists person(uid integer primary key autoincrement, name varchar[40]);
create table if not exists spec(spec varchar[40] primary key);
create table if not exists stat(stat varchar[40] primary key);
create table if not exists skill(skill varchar[40] primary key, spec boolean, stat references stat(stat));
create table if not exists skills(person_uid references person(uid), skill references skill(skill), spec references spec(spec));
create table if not exists skill_spec(skill references skill(skill), spec references spec(spec));
create table if not exists talent(talent varchar[40] primary key, spec boolean);
create table if not exists talents(person_uid references person(uid), talent references talent(talent), spec references spec(spec));
create table if not exists talent_spec(talent references talent(talent), spec references spec(spec));
create table if not exists trait(trait varchar[40] primary key);
create table if not exists traits(person_uid references person(uid), talent references talent(talent), value integer);
create table if not exists weapon_special(special varchar[20]);
create table if not exists ranged_weapon(name varchar[40], class references ranged_class(class), range varchar[6], single_shot boolean, semi_auto integer, full_auto integer, damage_dice integer, damage_modifier integer, damage_type references damage(type), penetration integer, clip integer, reload integer, weight integer);
create table if not exists ranged_specials (ranged_name references ranged_weapon(name), special references weapon_special(special));
create table if not exists melee_weapon(name varchar[40], class references melee_class(class), damage_dice integer, damage_modifier integer, damage_type references damage(type), penetration integer, weight integer);
create table if not exists melee_specials (melee_name references melee_weapon(name), special references weapon_special(special));
create table if not exists armor(name varchar[40], head integer, arms integer, body integer, legs integer, weight integer);